(function(){const v=document.getElementById('bgVideo');if(!v)return;const s=window.matchMedia('(max-width:520px)').matches;const r=window.matchMedia('(prefers-reduced-motion: reduce)').matches;if(s||r){try{v.pause();v.style.display='none'}catch(e){}return}const mp=40,ms=80;let px=0,py=0,sy=0,raf=null;function u(){const nx=px-0.5,ny=py-0.5,tx=(-nx)*mp,ty=(-ny)*mp,dh=document.documentElement.scrollHeight-window.innerHeight||1,sn=(sy/dh)-0.5,so=sn*ms;v.style.transform=`translate(calc(-50% + ${tx}px), calc(-50% + ${ty+so}px))`;raf=null}function pm(e){const w=window.innerWidth,h=window.innerHeight;px=(e.clientX||(e.touches&&e.touches[0].clientX)||(w/2))/w;py=(e.clientY||(e.touches&&e.touches[0].clientY)||(h/2))/h;if(raf)return;raf=requestAnimationFrame(u)}function sc(){sy=window.scrollY||window.pageYOffset;if(raf)return;raf=requestAnimationFrame(u)}function dev(e){const g=e.gamma||0,b=e.beta||0;px=(g+90)/180;py=(b+180)/360;if(raf)return;raf=requestAnimationFrame(u)}window.addEventListener('mousemove',pm,{passive:true});window.addEventListener('touchmove',pm,{passive:true});window.addEventListener('scroll',sc,{passive:true});if(window.DeviceOrientationEvent)window.addEventListener('deviceorientation',dev,true);v.play().catch(()=>{});})();

document.addEventListener('DOMContentLoaded',function(){const f=document.getElementById('contactForm');if(!f)return;const s=document.createElement('div');s.className='form-status';s.style.marginTop='12px';f.appendChild(s);function m(t,o=true){s.textContent=t;s.style.color=o?'var(--accent)':'salmon'}f.addEventListener('submit',async function(e){e.preventDefault();s.textContent='';const fd=new FormData(f),n=(fd.get('name')||'').toString().trim(),em=(fd.get('email')||'').toString().trim(),msg=(fd.get('message')||'').toString().trim();if(!n){m('Please enter your name',false);return}if(!em||!/\S+@\S+\.\S+/.test(em)){m('Please enter a valid email',false);return}if(!msg){m('Please enter a message',false);return}const action=f.getAttribute('action');try{if(action){const res=await fetch(action,{method:f.method||'POST',body:fd});if(!res.ok)throw new Error('Server error');m('Thanks — your message was sent.');f.reset()}else{m('Thanks — your message was received (local demo).');f.reset()}}catch(err){m('Submission failed — please try again later',false)}});});
